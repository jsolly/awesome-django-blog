{% extends "blog/parts/base.html" %}
{% load sri %}
{% load humanize %}

{% block head %}
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
  integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
  integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>

{% sri_static 'leaflet_plugins/leaflet-arc.min.js' %}
{% sri_static 'leaflet_plugins/leaflet.textpath.js' %}
{% sri_static 'leaflet_plugins/MarkerCluster.Default.css' %}
{% sri_static 'leaflet_plugins/MarkerCluster.css' %}
{% sri_static 'leaflet_plugins/leaflet.markercluster.js' %}
{% sri_static 'css/status_page.css' %}
{% endblock head %}

{% block content %}
<div class="grid-container">
  <h1 class="title">Blogthedata.com Status Report</h1>
  <div class="status-section">
    <h2>Blog Status</h2>
    <p>Status: {{ status }} {% if status == "up" %}ðŸŸ¢{% else %}ðŸ”´{% endif %}</p>
    <p>Message: {{ message }}</p>
    <p>Last Updated: {{ updated_at }}</p>
    <hr>
  </div>
  <div class="postgres-metrics">
    <h2>Postgres Metrics</h2>
    <p>Active Connections: {{ postgres_active_connections }}</p>
    <p>Slow Queries: {{ postgres_slow_queries }}</p>
    <p>Disk Space Used: {{ postgres_disk_space_used }} MB</p>
  </div>
  <div class="system-metrics">
    <h2>System Metrics</h2>
    <p>Uptime: {{ server_uptime }}</p>
    <p>CPU Usage: {{ cpu_usage_percent }}% <span class="badge {% if cpu_usage_percent > 80 %}badge-danger{% else %}badge-success{% endif %}"> {% if cpu_usage_percent > 80 %}ðŸ”¥{% else %}âœ…{% endif %}</span></p>
    <p>RAM Usage: {{ ram_used|intcomma }} MB / {{ ram_total|intcomma }} MB ({{ ram_percentage }}%)</p>
    <p>Disk Usage: {{ disk_usage }}</p>
  </div>
  <div class="site-traffic-map">
    <h2>Site Traffic Map</h2>
    {% include 'siteanalytics/parts/site_traffic_map.html' %}
  </div>
</div>
{% endblock %}
